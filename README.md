# 📦 admob-native-java-help

Cordova plugin to dynamically inject **native AdMob blocks** into `MainActivity.java`, enabling banners and interstitials to overlay the Cordova WebView — with flexibility, without overwriting entire files, and respecting user choices.

---

## ⚠️ Mandatory Requirements

This plugin **does not include** the AdMob SDK directly. You must also install the [`admob-plus-cordova`](https://admob-plus.github.io) plugin:

```bash
cordova plugin add admob-plus-cordova --variable APP_ID_ANDROID="ca-app-pub-xxxxxxxxxxxxxxxx~yyyyyyyyyy"
```
🧪 Use Google AdMob test IDs during development.

## 🚀 Plugin Installation
Clone or download this repository and install locally:

```bash
cordova plugin add admob-native-java-help@latest
```

## ⚙️ Available Variables

| Variable | Required | Description |
| --- | --- | --- |
| AD_TYPE | [OK] | Ad type: banner, interstitial or banner,interstitial |
| AD_POSITION | ❌ | top, bottom (default: bottom) |
| BANNER_AD_UNIT_ID | [OK] (if using banner) | AdMob banner ID |
| INTERSTITIAL_AD_UNIT_ID | [OK] (if using interstitial) | AdMob interstitial ID |
| APP_ID | [OK] | App ID provided by AdMob |


## 📄 Usage example with Cordova WebView
To display interstitial via JavaScript:
```js
// Show the ad
window.AndroidInterstitial.showAd();

// Check if it's loaded
if (window.AndroidInterstitial.isAdLoaded()) {
  console.log('Ready to display interstitial ad');
}

// Register callback when ad is closed
window.AndroidInterstitial.setOnAdClosedCallback(function () {
  console.log('Interstitial ad closed!');
});
```

## 📐 How the plugin works

1. Automatically locates your MainActivity.java;

2. Injects only the necessary blocks (banner_top, banner_bottom, interstitial, js_interface);

3. Dynamically replaces placeholders {{BANNER_ID}}, {{INTERSTITIAL_ID}};

4. Ensures WebView compatibility without overlapping existing content;

5. Allows reapplication without duplications via // ADMOB_NATIVE_PLUGIN marker.

## 🛠️ Useful Commands
```bash
cordova clean android
cordova build android
cordova run android
```

## 🧪 Test IDs (Google AdMob)

| Type | Test ID |
| --- | --- |
| App ID | ca-app-pub-3940256099942544~3347511713 |
| Banner | ca-app-pub-3940256099942544/6300978111 |
| Interstitial | ca-app-pub-3940256099942544/1033173712 |

## ⚠️ Important Notes
Changes are made to the MainActivity.java generated by Cordova (in `platforms\android\app\src\main\java\com\your_package\app_name\MainActivity.java`). If you remove the Android platform, the injections will be lost.
If you modify the MainActivity manually, before building the apk it is necessary to run:
```bash
cordova prepare android
```

Always use test IDs before publishing your app.

Compatible with projects using admob-plus-cordova, no need to duplicate SDK.

Does not overwrite the entire MainActivity, therefore it's safe for existing projects.

## [FOLDER] Plugin Structure

```bash
admob-native-java-help/
├── plugin.xml
├── package.json
├── scripts/
│   ├── pre_install.js
│   └── after_install.js
├── src/android/
│   ├── utils.js
│   └── blocks/
│       ├── banner_bottom.java.block
│       ├── banner_top.java.block
│       ├── interstitial.java.block
│       └── js_interface.java.block
└── README.md
```

## 👨‍💻 Author
Developed by ON00dev
Contributions, improvements and forks are welcome!

## 📄 License
MIT © [Current Year] — You are free to modify, reuse and share.